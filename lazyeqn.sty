\ProvidesPackage{lazyeqn}

% Read the README and docs for descriptions.
% provides useful macros for typesetting formulas.
% (c) Onur Solmaz 2014

% xspace is required to ensure trailing spaces after macros, when used
% without curly braces
% \usepackage{amsmath, amssymb, amscd, MnSymbol,mathrsfs}
% \usepackage{amsmath,amsbsy}
\usepackage{xspace}
\usepackage{relsize}
\usepackage{amsmath}
\usepackage{tabularx}
\usepackage{graphicx}
\usepackage{rotating}

% \usepackage{unicode-math}
% \usepackage{upgreek}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Different math symbols, latin and greek %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\AtBeginDocument{%
   \@ifundefined{pmb}{\def\pmb{\pmbi}}{}%
   \@ifundefined{boldsymbol}{\def\boldsymbol{\boldsymboli}}{}%
}

\def\pmbi{\ifmmode\else\expandafter\pmbii\fi\mathpalette\pmbiii}
\def\pmbii#1#2#3{%
   \leavevmode\setbox0\hbox{#3}%
   \kern-.024em\copy0\kern-\wd0%
   \kern+.024em\raise+.012em\copy0\kern-\wd0%
   \kern+.024em\copy0\kern-\wd0%
   \kern-.024em\raise-.012em\box0%
}
\def\pmbiii#1#2{%
   \setbox0\hbox{$\mathsurround0pt#1\mkern.3mu$}%
   \setbox1\hbox{$\mathsurround0pt#1{#2}$}%
   \mkern-.4mu\copy1\kern-\wd1%
   \mkern+.4mu\raise+\wd0\copy1\kern-\wd1%
   \mkern+.4mu\copy1\kern-\wd1%
   \mkern-.4mu\raise-\wd0\box1%
}%

\def\boldsymboli#1{{%
   \let\@nomath\@gobble\mathversion{bold}%
   \mathchoice%
      {\hbox{$\mathsurround0pt\displaystyle#1$}}%
      {\hbox{$\mathsurround0pt\textstyle#1$}}%
      {\hbox{$\mathsurround0pt\scriptstyle#1$}}%
      {\hbox{$\mathsurround0pt\scriptscriptstyle#1$}}%
}}

\newcommand{\eps}{\epsilon}
\newcommand{\vareps}{\varepsilon}
\newcommand{\varthe}{\vartheta}

\DeclareSymbolFont{sfoperators}{OT1}{cmss}{m}{n}
\DeclareSymbolFontAlphabet{\mathsf}{sfoperators}

\makeatletter
\def\operator@font{\mathgroup\symsfoperators}
\makeatother

\makeatletter
\newcommand\RedeclareMathOperator{%
  \@ifstar{\def\rmo@s{m}\rmo@redeclare}{\def\rmo@s{o}\rmo@redeclare}%
}
% this is taken from \renew@command
\newcommand\rmo@redeclare[2]{%
  \begingroup \escapechar\m@ne\xdef\@gtempa{{\string#1}}\endgroup
  \expandafter\@ifundefined\@gtempa
     {\@latex@error{\noexpand#1undefined}\@ehc}%
     \relax
  \expandafter\rmo@declmathop\rmo@s{#1}{#2}}
% This is just \@declmathop without \@ifdefinable
\newcommand\rmo@declmathop[3]{%
  \DeclareRobustCommand{#2}{\qopname\newmcodes@#1{#3}}%
}
\@onlypreamble\RedeclareMathOperator
\makeatother


% Macros for easy bracket handling
\newcommand{\sbr}[1]{\left[#1\right]}
\newcommand{\sbrn}[1]{[#1]}
\newcommand{\sbrbig}[1]{\big[#1\big]}
\newcommand{\sbrBig}[1]{\Big[#1\Big]}
\newcommand{\sbrbigg}[1]{\bigg[#1\bigg]}
\newcommand{\sbrBigg}[1]{\Bigg[#1\Bigg]}
%
\newcommand{\rbr}[1]{\left(#1\right)}
\newcommand{\rbrn}[1]{(#1)}
\newcommand{\rbrbig}[1]{\big(#1\big)}
\newcommand{\rbrBig}[1]{\Big(#1\Big)}
\newcommand{\rbrbigg}[1]{\bigg(#1\bigg)}
\newcommand{\rbrBigg}[1]{\Bigg(#1\Bigg)}
%
\newcommand{\cbr}[1]{\left\{#1\right\}}
\newcommand{\cbrn}[1]{\{#1\}}
\newcommand{\cbrbig}[1]{\big\{#1\big\}}
\newcommand{\cbrBig}[1]{\Big\{#1\Big\}}
\newcommand{\cbrbigg}[1]{\bigg\{#1\bigg\}}
\newcommand{\cbrBigg}[1]{\Bigg\{#1\Bigg\}}
% \newcommand{\cbr}[1]{\left\{#1\right\}}
%
% \newcommand{\abr}[1]{\left\langle\mkern1mu #1\mkern1mu\right\rangle}
\newcommand{\abr}[1]{\left\langle\mkern1mu #1 \mkern1mu\right\rangle}
\newcommand{\abrn}[1]{\langle\mkern1mu #1 \mkern1mu\rangle}
\newcommand{\abrbig}[1]{\big\langle\mkern1mu #1 \mkern1mu\big\rangle}
\newcommand{\abrBig}[1]{\Big\langle\mkern1mu #1 \mkern1mu\Big\rangle}
\newcommand{\abrbigg}[1]{\bigg\langle\mkern1mu #1 \mkern1mu\bigg\rangle}
\newcommand{\abrBigg}[1]{\Bigg\langle\mkern1mu #1 \mkern1mu\Bigg\rangle}

%
\def\dbr#1{%
   \setbox8\hbox{$\left[\llap{$#1$}\right[$}%
   \left[\kern-0.3\wd8\left[#1\right]\kern-0.3\wd8\right]%
}

\newcommand{\dif}{\mathsf{d}\mkern 0.8mu}
\newcommand{\Dif}{\mathsf{D}\mkern 0.8mu}

% \newcommand{\del}{\text{\rotatebox[origin=t]{20}{\scalebox{0.95}[1]{$\partial$}}}\mkern -0.7mu}
% \newcommand{\del}{\textsf{\reflectbox{6}}\mkern 1.4mu}
\newcommand{\del}{\partial}

% \makeatletter
% \newif\ifkp@upRm% is used in the .fd-file of jkp
% \DeclareSymbolFont{Letters}{OML}{jkp}{m}{n}
% \DeclareMathSymbol{\del}{\mathord}{Letters}{128}
% \makeatother

\newcommand{\var}{\delta}
\newcommand{\rbdot}{\rbr{\hspace{0.12em}\cdot\hspace{0.12em}}}
% Mathematical operators
\newcommand{\vartn}[2]{\frac{\var #1}{\var #2}}
\newcommand{\partd}[2]{\frac{\del #1}{\del #2}}
\newcommand{\partdd}[2]{\frac{\del\mkern -1.5mu^2 #1}{\del #2\mkern 1mu ^2}}
\newcommand{\epartd}[2]{\del\mkern -1mu_{#2}\mkern 1.5mu #1}
%
\newcommand{\ddt}{\frac{\dif}{\dif t}}
\newcommand{\ddelt}{\frac{\del}{\del t}}
%
\newcommand{\ddx}{\frac{\dif}{\dif x}}
\newcommand{\ddelx}{\frac{\del}{\del x}}
%
\newcommand{\deriv}[2]{\frac{\dif\mkern 1mu #1}{\dif\mkern 1mu #2}}
\newcommand{\dderiv}[2]{\frac{\dif^2 #1}{\dif\mkern 1mu #2\mkern 1.5mu^2}}
\newcommand{\Deriv}[2]{\frac{\Dif\mkern 1mu #1}{\Dif\mkern 1mu #2}}
\newcommand{\DDeriv}[2]{\frac{\Dif^2 #1}{\Dif\mkern 1mu #2\mkern 1.5mu^2}}
\newcommand{\ederiv}[2]{{\Dif}\mkern 1mu_{#2}\mkern 1.5mu #1}
\newcommand{\assem}{\mathsf{A}}
%\newcommand{\assem}{\mathlarger{\mathlarger{\mathlarger{\mathsf{A}}}}}
\newcommand{\evat}{\bigg|}
\newcommand{\degree}{\ensuremath{^{\circ}}\xspace}
\newcommand{\suml}[2]{\sum\limits_{#1}^{#2}}
\newcommand{\sumn}[2]{\sum\nolimits_{#1}^{#2}}
\newcommand{\dyc}{\otimes}
\newcommand{\crs}{\times}
\newcommand{\dtp}{\mathbin{\LargerCdot}}
% Special fractions and roots
% \newcommand{\half}{{\mthin\frac{1}{2}\mthin}}
% \newcommand{\third}{{\mthin\frac{1}{3}\mthin}}
% \newcommand{\fourth}{{\mthin\frac{1}{4}\mthin}}
% \newcommand{\fifth}{{\mthin\frac{1}{5}\mthin}}
% \newcommand{\sixth}{{\mthin\frac{1}{6}\mthin}}
% \newcommand{\seventh}{{\mthin\frac{1}{7}\mthin}}
% \newcommand{\eighth}{{\mthin\frac{1}{8}\mthin}}
% \newcommand{\ninth}{{\mthin\frac{1}{9}\mthin}}
% \newcommand{\tenth}{{\mthin\frac{1}{10}\mthin}}
% \newcommand{\twothree}{{\mthin\frac{2}{3}\mthin}}
% \newcommand{\threetwo}{{\mthin\frac{3}{2}\mthin}}
% \newcommand{\sqonetwo}{{\mthin\sqrt{\frac{1}{2}}\mthin}}
% \newcommand{\sqonethree}{{\mthin\sqrt{\frac{1}{3}}\mthin}}
% \newcommand{\sqtwothree}{{\mthin\sqrt{\frac{2}{3}}\mthin}}
% \newcommand{\sqthreetwo}{{\mthin\sqrt{\frac{3}{2}}\mthin}}
\def\mthin{\mkern\thinmuskip}

\newcommand{\half}{{\textstyle\mthin\frac{1}{2}\mthin}}
\newcommand{\third}{{\textstyle\mthin\frac{1}{3}\mthin}}
\newcommand{\fourth}{{\textstyle\mthin\frac{1}{4}\mthin}}
\newcommand{\fifth}{{\textstyle\mthin\frac{1}{5}\mthin}}
\newcommand{\sixth}{{\textstyle\mthin\frac{1}{6}\mthin}}
\newcommand{\seventh}{{\textstyle\mthin\frac{1}{7}\mthin}}
\newcommand{\eighth}{{\textstyle\mthin\frac{1}{8}\mthin}}
\newcommand{\ninth}{{\textstyle\mthin\frac{1}{9}\mthin}}
\newcommand{\tenth}{{\textstyle\mthin\frac{1}{10}\mthin}}
\newcommand{\twothree}{{\textstyle\mthin\frac{2}{3}\mthin}}
\newcommand{\threetwo}{{\textstyle\mthin\frac{3}{2}\mthin}}
\newcommand{\sqonetwo}{{\textstyle\mthin\sqrt{\frac{1}{2}}\mthin}}
\newcommand{\sqonethree}{{\textstyle\mthin\sqrt{\frac{1}{3}}\mthin}}
\newcommand{\sqtwothree}{{\textstyle\mthin\sqrt{\frac{2}{3}}\mthin}}
\newcommand{\sqthreetwo}{{\textstyle\mthin\sqrt{\frac{3}{2}}\mthin}}

% Roman numbers
\newcommand{\Rone}{\mathrm{I}}
\newcommand{\Rtwo}{\mathrm{I\hspace{-0.1em}I}}
\newcommand{\Rthree}{\mathrm{I\hspace{-0.1em}I\hspace{-0.1em}I}}
\newcommand{\Rfour}{\mathrm{I\hspace{-0.15em}V}}
\newcommand{\Rvarfour}{\mathrm{I\hspace{-0.13em}I\hspace{-0.13em}I\hspace{-0.13em}I}}
\newcommand{\Rfive}{\mathrm{V}}
\newcommand{\Rsix}{\mathrm{V\hspace{-0.15em}I}}
\newcommand{\Rseven}{\mathrm{V\hspace{-0.15em}I\hspace{-0.12em}I}}
\newcommand{\Reight}{\mathrm{V\hspace{-0.18em}I\hspace{-0.15em}I\hspace{-0.15em}I}}
\newcommand{\Rnine}{\mathrm{I\hspace{-0.15em}X}}
\newcommand{\Rten}{\mathrm{X}}


\makeatletter
\newcommand{\linedot}[1]{\ovd{\overline{#1}}}

% Over-prime
\newcommand{\ovp}[1]{\overset{\prime}{#1}}
\newcommand{\ovpp}[1]{\overset{\prime\prime}{#1}}

% Over-dot
\newcommand*{\LargerCdot}{\raisebox{0.35ex}{\scalebox{0.37}{$\bullet$}}}
\newcommand*{\LargerDot}{\raisebox{-0.25ex}{\scalebox{0.37}{$\bullet$}}}
\newcommand*{\ovd}[1]{\overset{\LargerDot}{#1}}
\newcommand*{\ovdd}[1]{\overset{\LargerDot\mkern .5mu\LargerDot}{#1}}

% \renewcommand{\div}{\mathop{\operator@font div}}
% \renewcommand{\arg}{\mathop{\operator@font arg}}
% \newcommand{\ndim}{\mathop{n_{\operator@font dim}}}

\DeclareMathOperator{\ndim}{\textit{n}_{\,dim}}
\RedeclareMathOperator{\arg}{arg}
\RedeclareMathOperator{\div}{div}
\DeclareMathOperator{\DIV}{DIV}
\DeclareMathOperator{\Div}{Div}
\DeclareMathOperator{\curl}{curl}
\DeclareMathOperator{\rot}{rot}
\DeclareMathOperator{\proj}{proj}
\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator{\unit}{unit}
\DeclareMathOperator{\Arg}{Arg}
\DeclareMathOperator{\sym}{sym}
\DeclareMathOperator{\TR}{TR}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\trial}{trial}
\DeclareMathOperator{\DEV}{DEV}
\DeclareMathOperator{\dev}{dev}
\DeclareMathOperator{\GRAD}{GRAD}
\DeclareMathOperator{\Grad}{Grad}
\DeclareMathOperator{\grad}{grad}
\DeclareMathOperator{\Lin}{Lin}
\DeclareMathOperator{\lin}{lin}
\DeclareMathOperator{\skw}{skw}
\DeclareMathOperator{\loc}{int}
\DeclareMathOperator{\cof}{cof}
\DeclareMathOperator{\reac}{reac}
\DeclareMathOperator{\pind}{pind}
\DeclareMathOperator{\diag}{diag}

\newcommand{\veci}[1]{#1_1,\ldots,#1_n}
\newcommand{\dV}{\mkern\medmuskip \dif V}
\newcommand{\dv}{\mkern\medmuskip \dif v}
\newcommand{\dA}{\mkern\medmuskip \dif A}
\newcommand{\da}{\mkern\medmuskip \dif a}
\newcommand{\dS}{\mkern\medmuskip \dif S}
\newcommand{\dx}{\mkern\medmuskip \dif x}
\newcommand{\dt}{\mkern\medmuskip \dif t}
\newcommand{\dbrl}{\mathopen{[\mkern-2.5mu[}}
\newcommand{\dbrr}{\mathclose{]\mkern-2.5mu]}}
\newcommand{\Abs}[1]{\left|#1\right|}
\newcommand{\Norm}[1]{\left\|#1\right\|}
\newcommand{\so}{\ensuremath{\cal SO}}
\newcommand{\rve}{\ensuremath{\cal RVE}}
\newcommand{\rpg}{\ensuremath{\cal RPG}}
\newcommand{\ehs}{\ensuremath{\cal EHS}}
\newcommand{\mo}{\ensuremath{\cal MO}}
\newcommand{\othree}{\ensuremath{{\cal O}(3)\/}}
\newcommand{\sothree}{\ensuremath{{\cal SO}(3)\/}}
\newcommand{\slthree}{\ensuremath{{\cal S\mkern-1mu L}(3)\/}}
\newcommand{\quadd}[1]{\ensuremath{\quad#1\quad}}
\newcommand{\eqand}{\quadd{\textup{and}}}
\newcommand{\eqor}{\quadd{\textup{or}}}
\newcommand{\eqwith}{\quadd{\textup{with}}}
\newcommand{\eqcomma}{\quadd{\textup{,}}}
\newcommand{\eqsemi}{\quadd{\textup{;}}}
\makeatother

% transpose macros
% \makeatletter
% \def\tra{\@ifnextchar[{\@@transpose}{\@transpose}} % \tra and \tra[]
% \def\@@transpose[#1]{^{\mathsf{#1T}}}
% \def\@transpose{^\mathsf{T}}
% \def\tratop#1{^{\stackrel{#1}{\mathsf{T}}}} % \tratop[]
% \makeatother

\makeatletter
\newcommand{\raisemath}[1]{\mathpalette{\raisem@th{#1}}}
\newcommand{\raisem@th}[3]{\raisebox{#1}{$#2#3$}}
\makeatother

% \def\transposesymbol{\top}
\def\transposesymbol{\raisemath{-0.09ex}{\mathsf{T}}}

\def\tra{^{\transposesymbol}}
\def\trab#1{^{#1\transposesymbol}}
\def\traf#1{^{\transposesymbol#1}}
\def\trabf#1#2{^{#1\transposesymbol#2}}
\def\trat#1{^{\stackrel{#1}{\transposesymbol}}} % \tratop[]

\def\inv{\ensuremath{ ^{-1}}}
\def\invtra{\trab{-}}
\def\trainv{\traf{-1}}

% Following macros are borrowed from the package schule2e. Very useful
% for typesetting row and column vectors easily.
% Usage: \cvec{1;2;3;4}. The difference between \cvec and \vcvec (and
% also \rvec and \vrvec are the type of brackets.

\makeatletter
\newcommand{\cvec}[2][r]{%
  \gdef\@VORNE{1}
  \left[\hskip-\arraycolsep%
    \begin{array}{#1}\vekSp@lten{#2}\end{array}%
  \hskip-\arraycolsep\right]}

\newcommand{\vcvec}[2][r]{%
  \gdef\@VORNE{1}
  \left|\hskip-\arraycolsep%
    \begin{array}{#1}\vekSp@lten{#2}\end{array}%
  \hskip-\arraycolsep\right|}

\def\vekSp@lten#1{\xvekSp@lten#1;vekL@stLine;}
\def\vekL@stLine{vekL@stLine}
\def\xvekSp@lten#1;{\def\temp{#1}%
  \ifx\temp\vekL@stLine
  \else
    \ifnum\@VORNE=1\gdef\@VORNE{0}
    \else\@arraycr\fi%
    {#1}%
    \expandafter\xvekSp@lten
  \fi}

% Same as \cvec, but row vector
\newcommand{\rvec}[2][r]{%
  \gdef\@VORNE{1}
  \left[\hskip-\arraycolsep%
    \begin{array}{#1}\vekZe@lten{#2}\end{array}%
  \hskip-\arraycolsep\right]}

\newcommand{\vrvec}[2][r]{%
  \gdef\@VORNE{1}
  \left|\hskip-\arraycolsep%
    \begin{array}{#1}\vekZe@lten{#2}\end{array}%
  \hskip-\arraycolsep\right|}
% tabularx is required for the definition of \col@sep
\def\vekZe@lten#1{\xvekZe@lten#1;vekL@stLinee;}
\def\vekL@stLinee{vekL@stLinee}
\def\xvekZe@lten#1;{\def\temp{#1}%
  \ifx\temp\vekL@stLinee
  \else
    \ifnum\@VORNE=1\gdef\@VORNE{0}
    \else\hskip\col@sep\fi%
    {#1}%
    \expandafter\xvekZe@lten
  \fi}
\makeatother

% Shortcut macro for vector bases
% (e.g. e_i dyadic e_j dyadic ... and so on)
% Usage: \basis[vector(default is bold e)]{indices}
\makeatletter
\def\basis{\@ifnextchar[\@basis%
        {\@basis[\mathbf{e}]}}
\def\@basis[#1]#2{%
        \begingroup
        \catcode`\ 12
        \def\@basisvector{#1}
        \iterbasis#2\relax
        \endgroup
}
\def\iterbasis#1#2\relax{%
        \if#1\otherspace
        % do nothing
        \else
                {\@basisvector_{#1}}%
        \fi
        \ifx\relax#2\relax
                \let\next\relax
        \else
                \let\next\iterbasis {\,\otimes\,}
        \fi
        \next#2\relax
}
\catcode`\ 12
\def\otherspace{ }%
\catcode`\ 10
\makeatother

% How to define a macro with an optional {} argument

% \def\temp#1{#1\unskip}\ifx\temp\empty
%   <EMPTY>%
% \else
%   <NON EMPTY>%
% \fi

% \edef\temp{\unexpanded\expandafter{\temp{}}}
% \temp{}

% double cross product
\usepackage{stackengine}
\def\stacktype{L}
\stackMath
\def\dcrs{\mathrel{\abovebaseline[-.4ex]{\rotatebox{45}{\stackon[0pt]{%
\stackon[0pt]{\rule[.15em]{0.6em}{.05em}}{\rule[.4em]{0.6em}{.05em}}%
}{\rule{.05em}{0.6em}\rule{.23em}{0pt}\rule{.05em}{0.6em}}}}}}
